!function t(e,i,r){function s(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return s(i?i:t)},u,u.exports,t,e,i,r)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(t){PIXI=function(){var e=t("pixi/display/Sprite"),i=t("pixi/display/Stage"),r=t("pixi/textures/Texture"),s=t("pixi/utils/autoDetectRenderer"),n=t("pixi/utils/raf"),a={Sprite:e,Stage:i,Texture:r,autoDetectRenderer:s,requestAnimationFrame:n};return a}()},{"pixi/display/Sprite":6,"pixi/display/Stage":7,"pixi/textures/Texture":32,"pixi/utils/autoDetectRenderer":34,"pixi/utils/raf":36}],2:[function(t,e){"use strict";function i(){this.global=new n,this.local=new n,this.target=null,this.originalEvent=null}function r(t){this.stage=t,this.mouse=new i,this.touchs={},this.tempPoint=new n,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.last=0}var s=t("./core/globals"),n=t("./geom/Point"),a=t("./display/Sprite"),o=t("./platform");i.prototype.getLocalPosition=function(t){var e=t.worldTransform,i=this.global,r=e[0],s=e[1],a=e[2],o=e[3],h=e[4],l=e[5],u=1/(r*h+s*-o);return new n(h*u*i.x+-s*u*i.y+(l*s-a*h)*u,r*u*i.y+-o*u*i.x+(-l*r+a*o)*u)};var h=r.prototype;h.handleEvent=function(t){switch(t.type){case"mousedown":this.onMouseDown(t);break;case"mousemove":this.onMouseMove(t);break;case"mouseup":this.onMouseUp(t);break;case"mouseout":this.onMouseOut(t);break;case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t)}},h.collectInteractiveSprite=function(t,e){for(var i=t.children,r=i.length-1;r>=0;r--){var s=i[r];s.interactive?(e.interactiveChildren=!0,this.interactiveItems.push(s),s.children.length>0&&this.collectInteractiveSprite(s,s)):(s.__iParent=null,s.children.length>0&&this.collectInteractiveSprite(s,e))}},h.setTarget=function(t){t?null===this.interactionDOMElement&&this.setTargetDomElement(t.view):null!==this.target&&o.window.removeEventListener("mouseup",this,!0),o.window.addEventListener("mouseup",this,!0),this.target=t},h.setTargetDomElement=function(t){null!==this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this,!0),this.interactionDOMElement.removeEventListener("mousedown",this,!0),this.interactionDOMElement.removeEventListener("mouseout",this,!0),this.interactionDOMElement.removeEventListener("touchstart",this,!0),this.interactionDOMElement.removeEventListener("touchend",this,!0),this.interactionDOMElement.removeEventListener("touchmove",this,!0));var e=o.navigator;e&&e.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),t.addEventListener("mousemove",this,!0),t.addEventListener("mousedown",this,!0),t.addEventListener("mouseout",this,!0),t.addEventListener("touchstart",this,!0),t.addEventListener("touchend",this,!0),t.addEventListener("touchmove",this,!0),this.interactionDOMElement=t},h.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=30*e/1e3,!(1>e)){this.last=t;var i,r;if(this.dirty){for(this.dirty=!1,i=0,r=this.interactiveItems.length;r>i;i++)this.interactiveItems[i].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)}for(this.interactionDOMElement.style.cursor="inherit",i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];(s.mouseover||s.mouseout||s.buttonMode)&&(s.__hit=this.hitTest(s,this.mouse),this.mouse.target=s,s.__hit?(s.buttonMode&&(this.interactionDOMElement.style.cursor=s.defaultCursor),s.__isOver||(s.mouseover&&s.mouseover(this.mouse),s.__isOver=!0)):s.__isOver&&(s.mouseout&&s.mouseout(this.mouse),s.__isOver=!1))}}}},h.onMouseMove=function(t){this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width),this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height);for(var i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];s.mousemove&&s.mousemove(this.mouse)}},h.onMouseDown=function(t){this.mouse.originalEvent=t;for(var e=0,i=this.interactiveItems.length;i>e;e++){var r=this.interactiveItems[e];if((r.mousedown||r.click)&&(r.__mouseIsDown=!0,r.__hit=this.hitTest(r,this.mouse),r.__hit&&(r.mousedown&&r.mousedown(this.mouse),r.__isDown=!0,!r.interactiveChildren)))break}},h.onMouseOut=function(){this.interactionDOMElement.style.cursor="inherit";for(var t=0,e=this.interactiveItems.length;e>t;t++){var i=this.interactiveItems[t];i.__isOver&&(this.mouse.target=i,i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1)}},h.onMouseUp=function(t){this.mouse.originalEvent=t;for(var e=!1,i=0,r=this.interactiveItems.length;r>i;i++){var s=this.interactiveItems[i];(s.mouseup||s.mouseupoutside||s.click)&&(s.__hit=this.hitTest(s,this.mouse),s.__hit&&!e?(s.mouseup&&s.mouseup(this.mouse),s.__isDown&&s.click&&s.click(this.mouse),s.interactiveChildren||(e=!0)):s.__isDown&&s.mouseupoutside&&s.mouseupoutside(this.mouse),s.__isDown=!1)}},h.hitTest=function(t,e){var i=e.global;if(t.vcount!==s.visibleCount)return!1;var r=t instanceof a,n=t.worldTransform,o=n[0],h=n[1],l=n[2],u=n[3],c=n[4],f=n[5],d=1/(o*c+h*-u),p=c*d*i.x+-h*d*i.y+(f*h-l*c)*d,v=o*d*i.y+-u*d*i.x+(-f*o+l*u)*d;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(p,v)?(e.target=t,!0):!1;if(r){var g,x=t.texture.frame.width,m=t.texture.frame.height,_=-x*t.anchor.x;if(p>_&&_+x>p&&(g=-m*t.anchor.y,v>g&&g+m>v))return e.target=t,!0}for(var b=0,A=t.children.length;A>b;b++){var T=t.children[b],E=this.hitTest(T,e);if(E)return e.target=t,!0}return!1},h.onTouchMove=function(t){var e,i,r,s,n,a,o,h=this.interactionDOMElement.getBoundingClientRect(),l=t.changedTouches;for(e=0,i=l.length;i>e;e++)for(r=l[e],s=this.touchs[r.identifier],s.originalEvent=t,s.global.x=(r.clientX-h.left)*(this.target.width/h.width),s.global.y=(r.clientY-h.top)*(this.target.height/h.height),n=0,a=this.interactiveItems.length;a>n;n++)o=this.interactiveItems[e],o.touchmove&&o.touchmove(s)},h.onTouchStart=function(t){for(var e=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,s=0,n=r.length;n>s;s++){var a=r[s],o=this.pool.pop();o||(o=new i),o.originalEvent=t,this.touchs[a.identifier]=o,o.global.x=(a.clientX-e.left)*(this.target.width/e.width),o.global.y=(a.clientY-e.top)*(this.target.height/e.height);for(var h=0,l=this.interactiveItems.length;l>h;h++){var u=this.interactiveItems[h];if((u.touchstart||u.tap)&&(u.__hit=this.hitTest(u,o),u.__hit&&(u.touchstart&&u.touchstart(o),u.__isDown=!0,u.__touchData=o,!u.interactiveChildren)))break}}},h.onTouchEnd=function(t){for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,r=0,s=i.length;s>r;r++){var n=i[r],a=this.touchs[n.identifier],o=!1;a.global.x=(n.clientX-e.left)*(this.target.width/e.width),a.global.y=(n.clientY-e.top)*(this.target.height/e.height);for(var h=0,l=this.interactiveItems.length;l>h;h++){var u=this.interactiveItems[h],c=u.__touchData;u.__hit=this.hitTest(u,a),c===a&&(a.originalEvent=t,(u.touchend||u.tap)&&(u.__hit&&!o?(u.touchend&&u.touchend(a),u.__isDown&&u.tap&&u.tap(a),u.interactiveChildren||(o=!0)):u.__isDown&&u.touchendoutside&&u.touchendoutside(a),u.__isDown=!1),u.__touchData=null)}this.pool.push(a),this.touchs[n.identifier]=null}},e.exports=r},{"./core/globals":3,"./display/Sprite":6,"./geom/Point":14,"./platform":17}],3:[function(t,e){"use strict";e.exports={gl:null,primitiveShader:null,stripShader:null,defaultShader:null,offset:null,projection:null,texturesToUpdate:[],texturesToDestroy:[],visibleCount:0}},{}],4:[function(t,e){function i(){this.last=this,this.first=this,this.position=new a,this.scale=new a(1,1),this.pivot=new a(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=s.create(),this.localTransform=s.create(),this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=new o(0,0,1,1)}var r=t("../core/globals"),s=t("../geom/matrix").mat3,n=t("../filters/FilterBlock"),a=t("../geom/Point"),o=t("../geom/Rectangle"),h=i.prototype;h.setInteractive=function(t){this.interactive=t},Object.defineProperty(h,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(h,"mask",{get:function(){return this._mask},set:function(t){t?this._mask?(t.start=this._mask.start,t.end=this._mask.end):(this.addFilter(t),t.renderable=!1):(this.removeFilter(this._mask),this._mask.renderable=!0),this._mask=t}}),Object.defineProperty(h,"filters",{get:function(){return this._filters},set:function(t){if(t){this._filters&&this.removeFilter(this._filters),this.addFilter(t);for(var e=[],i=0;i<t.length;i++)for(var r=t[i].passes,s=0;s<r.length;s++)e.push(r[s]);t.start.filterPasses=e}else this._filters&&this.removeFilter(this._filters);this._filters=t}}),h.addFilter=function(t){var e=new n,i=new n;t.start=e,t.end=i,e.data=t,i.data=t,e.first=e.last=this,i.first=i.last=this,e.open=!0,e.target=this;var r,s,a=e,o=e;s=this.first._iPrev,s?(r=s._iNext,a._iPrev=s,s._iNext=a):r=this,r&&(r._iPrev=o,o._iNext=r),a=i,o=i,r=null,s=null,s=this.last,r=s._iNext,r&&(r._iPrev=o,o._iNext=r),a._iPrev=s,s._iNext=a;for(var h=this,l=this.last;h;)h.last===l&&(h.last=i),h=h.parent;this.first=e,this.__renderGroup&&this.__renderGroup.addFilterBlocks(e,i)},h.removeFilter=function(t){var e=t.start,i=e._iNext,r=e._iPrev;i&&(i._iPrev=r),r&&(r._iNext=i),this.first=e._iNext;var s=t.end;i=s._iNext,r=s._iPrev,i&&(i._iPrev=r),r._iNext=i;for(var n=s._iPrev,a=this;a.last===s&&(a.last=n,a=a.parent););this.__renderGroup&&this.__renderGroup.removeFilterBlocks(e,s)},h.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.localTransform,e=this.parent.worldTransform,i=this.worldTransform;t[0]=this._cr*this.scale.x,t[1]=-this._sr*this.scale.y,t[3]=this._sr*this.scale.x,t[4]=this._cr*this.scale.y;var s=this.pivot.x,n=this.pivot.y,a=t[0],o=t[1],h=this.position.x-t[0]*s-n*t[1],l=t[3],u=t[4],c=this.position.y-t[4]*n-s*t[3],f=e[0],d=e[1],p=e[2],v=e[3],g=e[4],x=e[5];t[2]=h,t[5]=c,i[0]=f*a+d*l,i[1]=f*o+d*u,i[2]=f*h+d*c+p,i[3]=v*a+g*l,i[4]=v*o+g*u,i[5]=v*h+g*c+x,this.worldAlpha=this.alpha*this.parent.worldAlpha,this.vcount=r.visibleCount},e.exports=i},{"../core/globals":3,"../filters/FilterBlock":13,"../geom/Point":14,"../geom/Rectangle":15,"../geom/matrix":16}],5:[function(t,e){"use strict";function i(){r.call(this),this.children=[]}var r=t("./DisplayObject"),s=i.prototype=Object.create(r.prototype,{constructor:{value:i}});s.addChild=function(t){if(t.parent&&t.parent!==this&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.stage){var e=t;do e.interactive&&(this.stage.dirty=!0),e.stage=this.stage,e=e._iNext;while(e)}var i,r,s=t.first,n=t.last;r=this._filters||this._mask?this.last._iPrev:this.last,i=r._iNext;for(var a=this,o=r;a;)a.last===o&&(a.last=t.last),a=a.parent;i&&(i._iPrev=n,n._iNext=i),s._iPrev=r,r._iNext=s,this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},s.addChildAt=function(t,e){if(!(e>=0&&e<=this.children.length))throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length);if(void 0!==t.parent&&t.parent.removeChild(t),t.parent=this,this.stage){var i=t;do i.interactive&&(this.stage.dirty=!0),i.stage=this.stage,i=i._iNext;while(i)}var r,s,n=t.first,a=t.last;if(e===this.children.length){s=this.last;for(var o=this,h=this.last;o;)o.last===h&&(o.last=t.last),o=o.parent}else s=0===e?this:this.children[e-1].last;r=s._iNext,r&&(r._iPrev=a,a._iNext=r),n._iPrev=s,s._iNext=n,this.children.splice(e,0,t),this.__renderGroup&&(t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),this.__renderGroup.addDisplayObjectAndChildren(t))},s.swapChildren=function(t,e){if(t!==e){var i=this.children.indexOf(t),r=this.children.indexOf(e);if(0>i||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.removeChild(t),this.removeChild(e),r>i?(this.addChildAt(e,i),this.addChildAt(t,r)):(this.addChildAt(t,r),this.addChildAt(e,i))}},s.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Both the supplied DisplayObjects must be a child of the caller "+this)},s.removeChild=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error(t+" The supplied DisplayObject must be a child of the caller "+this);var i=t.first,r=t.last,s=r._iNext,n=i._iPrev;if(s&&(s._iPrev=n),n._iNext=s,this.last===r)for(var a=i._iPrev,o=this;o.last===r&&(o.last=a,o=o.parent););if(r._iNext=null,i._iPrev=null,this.stage){var h=t;do h.interactive&&(this.stage.dirty=!0),h.stage=null,h=h._iNext;while(h)}t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t),t.parent=void 0,this.children.splice(e,1)},s.updateTransform=function(){if(this.visible){r.prototype.updateTransform.call(this);for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()}},e.exports=i},{"./DisplayObject":4}],6:[function(t,e){"use strict";function i(t){if(s.call(this),this.anchor=new n,this.texture=t,this.blendMode=r.NORMAL,this._width=0,this._height=0,t.baseTexture.hasLoaded)this.updateFrame=!0;else{var e=this;this.texture.addEventListener("update",function(){e.onTextureUpdate()})}this.renderable=!0}var r=t("./blendModes"),s=t("./DisplayObjectContainer"),n=t("../geom/Point"),a=t("../textures/Texture"),o=i.prototype=Object.create(s.prototype,{constructor:{value:i}});Object.defineProperty(o,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(o,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),o.setTexture=function(t){this.texture.baseTexture!==t.baseTexture?(this.textureChange=!0,this.texture=t,this.__renderGroup&&this.__renderGroup.updateTexture(this)):this.texture=t,this.updateFrame=!0},o.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},i.fromFrame=function(t){var e=a.cache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new i(e)},i.fromImage=function(t){var e=a.fromImage(t);return new i(e)},e.exports=i},{"../geom/Point":14,"../textures/Texture":32,"./DisplayObjectContainer":5,"./blendModes":8}],7:[function(t,e){"use strict";function i(t){a.call(this),this.worldTransform=s.create(),this.interactive=!0,this.interactionManager=new o(this),this.dirty=!0,this.__childrenAdded=[],this.__childrenRemoved=[],this.stage=this,this.stage.hitArea=new h(0,0,1e5,1e5),this.setBackgroundColor(t),this.worldVisible=!0}var r=t("../core/globals"),s=t("../geom/matrix").mat3,n=t("../utils/color").hex2rgb,a=t("./DisplayObjectContainer"),o=t("../InteractionManager"),h=t("../geom/Rectangle"),l=i.prototype=Object.create(a.prototype,{constructor:{value:i}});l.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},l.updateTransform=function(){this.worldAlpha=1,this.vcount=r.visibleCount;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},l.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=n(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},l.getMousePosition=function(){return this.interactionManager.mouse.global},e.exports=i},{"../InteractionManager":2,"../core/globals":3,"../geom/Rectangle":15,"../geom/matrix":16,"../utils/color":35,"./DisplayObjectContainer":5}],8:[function(t,e){"use strict";e.exports={NORMAL:0,SCREEN:1}},{}],9:[function(t,e){"use strict";function i(){var t={};this.addEventListener=this.on=function(e,i){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var i=0,r=t[e.type].length;r>i;i++)t[e.type][i](e)},this.removeEventListener=this.off=function(e,i){var r=t[e].indexOf(i);-1!==r&&t[e].splice(r,1)},this.removeAllEventListeners=function(e){var i=t[e];i&&(i.length=0)}}e.exports=i},{}],10:[function(t,e){"use strict";function i(){r.call(this),this.renderable=!0}var r=t("../display/DisplayObject"),s=i.prototype=Object.create(r.prototype,{constructor:{value:i}});s.renderCanvas=function(){},s.initWebGL=function(){},s.renderWebGL=function(){},e.exports=i},{"../display/DisplayObject":4}],11:[function(t,e){"use strict";function i(t,e,i){s.call(this),this.texture=t,this.blendMode=r.NORMAL;try{this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new Float32Array([0,0,0,0,0,0,0,0,0]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3])}catch(n){this.uvs=[0,1,1,1,1,0,0,1],this.verticies=[0,0,0,0,0,0,0,0,0],this.colors=[1,1,1,1],this.indices=[0,1,2,3]}if(this.width=e,this.height=i,t.baseTexture.hasLoaded)this.width=this.texture.frame.width,this.height=this.texture.frame.height,this.updateFrame=!0;else{var a=this;this.texture.addEventListener("update",function(){a.onTextureUpdate()})}this.renderable=!0}var r=t("../display/blendModes"),s=t("../display/DisplayObjectContainer"),n=i.prototype=Object.create(s.prototype,{constructor:{value:i}});n.setTexture=function(t){this.texture=t,this.width=t.frame.width,this.height=t.frame.height,this.updateFrame=!0},n.onTextureUpdate=function(){this.updateFrame=!0},e.exports=i},{"../display/DisplayObjectContainer":5,"../display/blendModes":8}],12:[function(t,e){"use strict";function i(t,e,i){s.call(this),this.texture=t,this.width=e,this.height=i,this.tileScale=new n(1,1),this.tilePosition=new n(0,0),this.renderable=!0,this.blendMode=r.NORMAL}var r=t("../display/blendModes"),s=t("../display/DisplayObjectContainer"),n=t("../geom/Point"),a=i.prototype=Object.create(s.prototype,{constructor:{value:i}});a.setTexture=function(t){this.texture=t,this.updateFrame=!0},a.onTextureUpdate=function(){this.updateFrame=!0},e.exports=i},{"../display/DisplayObjectContainer":5,"../display/blendModes":8,"../geom/Point":14}],13:[function(t,e){"use strict";function i(){this.visible=!0,this.renderable=!0}e.exports=i},{}],14:[function(t,e){"use strict";function i(t,e){this.x=t||0,this.y=e||0}i.prototype.clone=function(){return new i(this.x,this.y)},e.exports=i},{}],15:[function(t,e){"use strict";function i(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0}var r=i.prototype;r.clone=function(){return new i(this.x,this.y,this.width,this.height)},r.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},e.exports=i},{}],16:[function(t,e,i){"use strict";var r=i.Matrix="undefined"!=typeof Float32Array?Float32Array:Array,s=i.mat3={},n=i.mat4={};s.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},s.multiply=function(t,e,i){i||(i=t);var r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=e[0],d=e[1],p=e[2],v=e[3],g=e[4],x=e[5],m=e[6],_=e[7],b=e[8];return i[0]=f*r+d*a+p*l,i[1]=f*s+d*o+p*u,i[2]=f*n+d*h+p*c,i[3]=v*r+g*a+x*l,i[4]=v*s+g*o+x*u,i[5]=v*n+g*h+x*c,i[6]=m*r+_*a+b*l,i[7]=m*s+_*o+b*u,i[8]=m*n+_*h+b*c,i},s.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.transpose=function(t,e){if(!e||t===e){var i=t[1],r=t[2],s=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=r,t[7]=s,t}return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],e},s.toMat4=function(t,e){return e||(e=n.create()),e[15]=1,e[14]=0,e[13]=0,e[12]=0,e[11]=0,e[10]=t[8],e[9]=t[7],e[8]=t[6],e[7]=0,e[6]=t[5],e[5]=t[4],e[4]=t[3],e[3]=0,e[2]=t[2],e[1]=t[1],e[0]=t[0],e},n.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,e){if(!e||t===e){var i=t[1],r=t[2],s=t[3],n=t[6],a=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=n,t[11]=t[14],t[12]=s,t[13]=a,t[14]=o,t}return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e},n.multiply=function(t,e,i){i||(i=t);var r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],v=t[12],g=t[13],x=t[14],m=t[15],_=e[0],b=e[1],A=e[2],T=e[3];return i[0]=_*r+b*o+A*c+T*v,i[1]=_*s+b*h+A*f+T*g,i[2]=_*n+b*l+A*d+T*x,i[3]=_*a+b*u+A*p+T*m,_=e[4],b=e[5],A=e[6],T=e[7],i[4]=_*r+b*o+A*c+T*v,i[5]=_*s+b*h+A*f+T*g,i[6]=_*n+b*l+A*d+T*x,i[7]=_*a+b*u+A*p+T*m,_=e[8],b=e[9],A=e[10],T=e[11],i[8]=_*r+b*o+A*c+T*v,i[9]=_*s+b*h+A*f+T*g,i[10]=_*n+b*l+A*d+T*x,i[11]=_*a+b*u+A*p+T*m,_=e[12],b=e[13],A=e[14],T=e[15],i[12]=_*r+b*o+A*c+T*v,i[13]=_*s+b*h+A*f+T*g,i[14]=_*n+b*l+A*d+T*x,i[15]=_*a+b*u+A*p+T*m,i}},{}],17:[function(t,e){(function(t){e.exports={console:t.console,document:t.document,location:t.location,navigator:t.navigator,window:t.window,createCanvas:function(){return t.document.createElement("canvas")},createImage:function(){return new t.Image},createRequest:function(){return new t.XMLHttpRequest}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(t,e){"use strict";function i(){r.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.currentPath={points:[]}}var r=t("../display/DisplayObjectContainer"),s=t("../geom/Rectangle"),n=i.prototype=Object.create(r.prototype,{constructor:{value:i}});n.lineStyle=function(t,e,r){this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.POLY},this.graphicsData.push(this.currentPath)},n.moveTo=function(t,e){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath)},n.lineTo=function(t,e){this.currentPath.points.push(t,e),this.dirty=!0},n.beginFill=function(t,e){this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e},n.endFill=function(){this.filling=!1,this.fillColor=null,this.fillAlpha=1},n.drawRect=function(t,e,r,s){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,r,s],type:i.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0},n.drawCircle=function(t,e,r){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,r,r],type:i.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0},n.drawElipse=function(t,e,r,s){this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,r,s],type:i.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0},n.clear=function(){this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null},n.updateFilterBounds=function(){if(!this.bounds){for(var t,e,r,n=1/0,a=-1/0,o=1/0,h=-1/0,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],c=u.type,f=u.lineWidth;if(t=u.points,c===i.RECT){e=t.x-f/2,r=t.y-f/2;var d=t.width+f,p=t.height+f;n=n>e?e:n,a=e+d>a?e+d:a,o=o>r?e:o,h=r+p>h?r+p:h}else if(c===i.CIRC||c===i.ELIP){e=t.x,r=t.y;var v=t.radius+f/2;n=n>e-v?e-v:n,a=e+v>a?e+v:a,o=o>r-v?r-v:o,h=r+v>h?r+v:h}else for(var g=0;g<t.length;g+=2)e=t[g],r=t[g+1],n=n>e-f?e-f:n,a=e+f>a?e+f:a,o=o>r-f?r-f:o,h=r+f>h?r+f:h}this.bounds=new s(n,o,a-n,h-o)}},i.POLY=0,i.RECT=1,i.CIRC=2,i.ELIP=3,e.exports=i},{"../display/DisplayObjectContainer":5,"../geom/Rectangle":15}],19:[function(t,e){"use strict";function i(t,e,i,s){this.transparent=s,this.width=t||800,this.height=e||600,this.view=i||r.createCanvas(),this.context=this.view.getContext("2d"),this.smoothProperty=null,"imageSmoothingEnabled"in this.context?this.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.smoothProperty="oImageSmoothingEnabled"),this.scaleMode=null,this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0}var r=t("../../platform"),s=t("../../core/globals"),n=t("./graphics"),a=t("../../textures/BaseTexture"),o=t("../../textures/Texture"),h=t("../../display/Sprite"),l=t("../../extras/TilingSprite"),u=t("../../extras/Strip"),c=t("../../extras/CustomRenderable"),f=t("../../primitives/Graphics"),d=t("../../filters/FilterBlock"),p=i.prototype;p.render=function(t){s.texturesToUpdate=[],s.texturesToDestroy=[],s.visibleCount++,t.updateTransform(),this.view.style.backgroundColor===t.backgroundColorString||this.transparent||(this.view.style.backgroundColor=t.backgroundColorString),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),o.frameUpdates.length>0&&(o.frameUpdates=[])},p.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},p.renderDisplayObject=function(t){var e,i=this.context;i.globalCompositeOperation="source-over";var r=t.last._iNext;t=t.first;do if(e=t.worldTransform,t.visible)if(t.renderable){if(t instanceof h){var s=t.texture.frame;s&&s.width&&s.height&&t.texture.baseTexture.source&&(i.globalAlpha=t.worldAlpha,i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.smoothProperty&&this.scaleMode!==t.texture.baseTexture.scaleMode&&(this.scaleMode=t.texture.baseTexture.scaleMode,i[this.smoothProperty]=this.scaleMode===a.SCALE_MODE.LINEAR),i.drawImage(t.texture.baseTexture.source,s.x,s.y,s.width,s.height,t.anchor.x*-s.width,t.anchor.y*-s.height,s.width,s.height))}else if(t instanceof u)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderStrip(t);else if(t instanceof l)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),this.renderTilingSprite(t);else if(t instanceof c)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),t.renderCanvas(this);else if(t instanceof f)i.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),n.renderGraphics(t,i);else if(t instanceof d&&t.data instanceof f){var o=t.data;if(t.open){i.save();var p=o.alpha,v=o.worldTransform;i.setTransform(v[0],v[3],v[1],v[4],v[2],v[5]),o.worldAlpha=.5,i.worldAlpha=0,n.renderGraphicsMask(o,i),i.clip(),o.worldAlpha=p}else i.restore()}t=t._iNext}else t=t._iNext;else t=t.last._iNext;while(t!==r)},p.renderStripFlat=function(t){var e=this.context,i=t.verticies,r=i.length/2;this.count++,e.beginPath();for(var s=1;r-2>s;s++){var n=2*s,a=i[n],o=i[n+2],h=i[n+4],l=i[n+1],u=i[n+3],c=i[n+5];e.moveTo(a,l),e.lineTo(o,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},p.renderTilingSprite=function(t){var e=this.context;e.globalAlpha=t.worldAlpha,t.__tilePattern||(t.__tilePattern=e.createPattern(t.texture.baseTexture.source,"repeat")),e.beginPath();var i=t.tilePosition,r=t.tileScale;e.scale(r.x,r.y),e.translate(i.x,i.y),e.fillStyle=t.__tilePattern,e.fillRect(-i.x,-i.y,t.width/r.x,t.height/r.y),e.scale(1/r.x,1/r.y),e.translate(-i.x,-i.y),e.closePath()},p.renderStrip=function(t){var e=this.context,i=t.verticies,r=t.uvs,s=i.length/2;this.count++;for(var n=1;s-2>n;n++){var a=2*n,o=i[a],h=i[a+2],l=i[a+4],u=i[a+1],c=i[a+3],f=i[a+5],d=r[a]*t.texture.width,p=r[a+2]*t.texture.width,v=r[a+4]*t.texture.width,g=r[a+1]*t.texture.height,x=r[a+3]*t.texture.height,m=r[a+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(o,u),e.lineTo(h,c),e.lineTo(l,f),e.closePath(),e.clip();var _=d*x+g*v+p*m-x*v-g*p-d*m,b=o*x+g*l+h*m-x*l-g*h-o*m,A=d*h+o*v+p*l-h*v-o*p-d*l,T=d*x*l+g*h*v+o*p*m-o*x*v-g*p*l-d*h*m,E=u*x+g*f+c*m-x*f-g*c-u*m,R=d*c+u*v+p*f-c*v-u*p-d*f,y=d*x*f+g*c*v+u*p*m-u*x*v-g*p*f-d*c*m;e.transform(b/_,E/_,A/_,R/_,T/_,y/_),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},e.exports=i},{"../../core/globals":3,"../../display/Sprite":6,"../../extras/CustomRenderable":10,"../../extras/Strip":11,"../../extras/TilingSprite":12,"../../filters/FilterBlock":13,"../../platform":17,"../../primitives/Graphics":18,"../../textures/BaseTexture":31,"../../textures/Texture":32,"./graphics":20}],20:[function(t,e,i){"use strict";var r=t("../../platform"),s=t("../../primitives/Graphics");i.renderGraphics=function(t,e){for(var i,r,n,a,o=t.worldAlpha,h="",l=0,u=t.graphicsData.length;u>l;l++)if(i=t.graphicsData[l],r=i.points,h=e.strokeStyle="#"+("00000"+(0|i.lineColor).toString(16)).substr(-6),e.lineWidth=i.lineWidth,i.type===s.POLY){for(e.beginPath(),e.moveTo(r[0],r[1]),n=1,a=r.length/2;a>n;n++)e.lineTo(r[2*n],r[2*n+1]);r[0]===r[r.length-2]&&r[1]===r[r.length-1]&&e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*o,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*o,e.stroke())}else if(i.type===s.RECT)(i.fillColor||0===i.fillColor)&&(e.globalAlpha=i.fillAlpha*o,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fillRect(r[0],r[1],r[2],r[3])),i.lineWidth&&(e.globalAlpha=i.lineAlpha*o,e.strokeRect(r[0],r[1],r[2],r[3]));else if(i.type===s.CIRC)e.beginPath(),e.arc(r[0],r[1],r[2],0,2*Math.PI),e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*o,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*o,e.stroke());else if(i.type===s.ELIP){var c=i.points,f=2*c[2],d=2*c[3],p=c[0]-f/2,v=c[1]-d/2;e.beginPath();var g=.5522848,x=f/2*g,m=d/2*g,_=p+f,b=v+d,A=p+f/2,T=v+d/2;e.moveTo(p,T),e.bezierCurveTo(p,T-m,A-x,v,A,v),e.bezierCurveTo(A+x,v,_,T-m,_,T),e.bezierCurveTo(_,T+m,A+x,b,A,b),e.bezierCurveTo(A-x,b,p,T+m,p,T),e.closePath(),i.fill&&(e.globalAlpha=i.fillAlpha*o,e.fillStyle=h="#"+("00000"+(0|i.fillColor).toString(16)).substr(-6),e.fill()),i.lineWidth&&(e.globalAlpha=i.lineAlpha*o,e.stroke())}},i.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;
if(0!==i){i>1&&(i=1,r.console.warn("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var n=0;1>n;n++){var a=t.graphicsData[n],o=a.points;if(a.type===s.POLY){e.beginPath(),e.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)e.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&e.closePath()}else if(a.type===s.RECT)e.beginPath(),e.rect(o[0],o[1],o[2],o[3]),e.closePath();else if(a.type===s.CIRC)e.beginPath(),e.arc(o[0],o[1],o[2],0,2*Math.PI),e.closePath();else if(a.type===s.ELIP){var l=a.points,u=2*l[2],c=2*l[3],f=l[0]-u/2,d=l[1]-c/2;e.beginPath();var p=.5522848,v=u/2*p,g=c/2*p,x=f+u,m=d+c,_=f+u/2,b=d+c/2;e.moveTo(f,b),e.bezierCurveTo(f,b-g,_-v,d,_,d),e.bezierCurveTo(_+v,d,x,b-g,x,b),e.bezierCurveTo(x,b+g,_+v,m,_,m),e.bezierCurveTo(_-v,m,f,b+g,f,b),e.closePath()}}}}},{"../../platform":17,"../../primitives/Graphics":18}],21:[function(t,e){"use strict";function i(){this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"],this.textureCount=0}var r=t("./compile"),s=t("../../core/globals"),n=i.prototype;n.init=function(){var t=s.gl,e=r.program(t,this.vertexSrc||i.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord");for(var n in this.uniforms)this.uniforms[n].uniformLocation=t.getUniformLocation(e,n);this.initUniforms(),this.program=e},n.initUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms){t=this.uniforms[e];var i=t.type;"sampler2D"===i?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===i||"mat3"===i||"mat4"===i?(t.glMatrix=!0,t.glValueLength=1,"mat2"===i?t.glFunc=s.gl.uniformMatrix2fv:"mat3"===i?t.glFunc=s.gl.uniformMatrix3fv:"mat4"===i&&(t.glFunc=s.gl.uniformMatrix4fv)):(t.glFunc=s.gl["uniform"+i],t.glValueLength="2f"===i||"2i"===i?2:"3f"===i||"3i"===i?3:"4f"===i||"4i"===i?4:1)}},n.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){if(s.gl.activeTexture(s.gl["TEXTURE"+this.textureCount]),s.gl.bindTexture(s.gl.TEXTURE_2D,t.value.baseTexture._glTexture),t.textureData){var e=t.textureData,i=e.magFilter?e.magFilter:s.gl.LINEAR,r=e.minFilter?e.minFilter:s.gl.LINEAR,n=e.wrapS?e.wrapS:s.gl.CLAMP_TO_EDGE,a=e.wrapT?e.wrapT:s.gl.CLAMP_TO_EDGE,o=e.luminance?s.gl.LUMINANCE:s.gl.RGBA;if(e.repeat&&(n=s.gl.REPEAT,a=s.gl.REPEAT),s.gl.pixelStorei(s.gl.UNPACK_FLIP_Y_WEBGL,!1),e.width){var h=e.width?e.width:512,l=e.height?e.height:2,u=e.border?e.border:0;s.gl.texImage2D(s.gl.TEXTURE_2D,0,o,h,l,u,o,s.gl.UNSIGNED_BYTE,null)}else s.gl.texImage2D(s.gl.TEXTURE_2D,0,o,s.gl.RGBA,s.gl.UNSIGNED_BYTE,t.value.baseTexture.source);s.gl.texParameteri(s.gl.TEXTURE_2D,s.gl.TEXTURE_MAG_FILTER,i),s.gl.texParameteri(s.gl.TEXTURE_2D,s.gl.TEXTURE_MIN_FILTER,r),s.gl.texParameteri(s.gl.TEXTURE_2D,s.gl.TEXTURE_WRAP_S,n),s.gl.texParameteri(s.gl.TEXTURE_2D,s.gl.TEXTURE_WRAP_T,a)}s.gl.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},n.syncUniforms=function(){this.textureCount=1;var t;for(var e in this.uniforms)t=this.uniforms[e],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(s.gl,t.uniformLocation,t.transpose,t.value):t.glFunc.call(s.gl,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(s.gl,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(s.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(s.gl,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(s.gl.activeTexture(s.gl["TEXTURE"+this.textureCount]),s.gl.bindTexture(s.gl.TEXTURE_2D,t.value.baseTexture._glTexture),s.gl.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},i.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],e.exports=i},{"../../core/globals":3,"./compile":28}],22:[function(t,e){"use strict";function i(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor  * alpha;","}"]}var r=t("./compile"),s=t("../../core/globals");i.prototype.init=function(){var t=s.gl,e=r.program(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},e.exports=i},{"../../core/globals":3,"./compile":28}],23:[function(t,e){"use strict";function i(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","varying vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]}var r=t("./compile"),s=t("../../core/globals");i.prototype.init=function(){var t=s.gl,e=r.program(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},e.exports=i},{"../../core/globals":3,"./compile":28}],24:[function(t,e){"use strict";function i(t){this.gl=t,this.size=0,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.blendMode=s.NORMAL,this.dynamicSize=1}var r=t("../../core/globals"),s=t("../../display/blendModes"),n=i.prototype;n.clean=function(){this.verticies=[],this.uvs=[],this.indices=[],this.colors=[],this.dynamicSize=1,this.texture=null,this.last=null,this.size=0,this.head=null,this.tail=null},n.restoreLostContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer()},n.init=function(t){t.batch=this,this.dirty=!0,this.blendMode=t.blendMode,this.texture=t.texture.baseTexture,this.head=t,this.tail=t,this.size=1,this.growBatch()},n.insertBefore=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__prev;e.__prev=t,t.__next=e,i?(t.__prev=i,i.__next=t):this.head=t},n.insertAfter=function(t,e){this.size++,t.batch=this,this.dirty=!0;var i=e.__next;e.__next=t,t.__prev=e,i?(t.__next=i,i.__prev=t):this.tail=t},n.remove=function(t){return this.size--,this.size?(t.__prev?t.__prev.__next=t.__next:(this.head=t.__next,this.head.__prev=null),t.__next?t.__next.__prev=t.__prev:(this.tail=t.__prev,this.tail.__next=null),t.batch=null,t.__next=null,t.__prev=null,void(this.dirty=!0)):(t.batch=null,t.__prev=null,void(t.__next=null))},n.split=function(t){this.dirty=!0;var e=new i(this.gl);e.init(t),e.texture=this.texture,e.tail=this.tail,this.tail=t.__prev,this.tail.__next=null,t.__prev=null;for(var r=0;t;)r++,t.batch=e,t=t.__next;return e.size=r,this.size-=r,e},n.merge=function(t){this.dirty=!0,this.tail.__next=t.head,t.head.__prev=this.tail,this.size+=t.size,this.tail=t.tail;for(var e=t.head;e;)e.batch=this,e=e.__next},n.growBatch=function(){var t=this.gl;this.dynamicSize=1===this.size?1:1.5*this.size,this.verticies=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.verticies,t.DYNAMIC_DRAW),this.uvs=new Float32Array(8*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.DYNAMIC_DRAW),this.dirtyUVS=!0,this.colors=new Float32Array(4*this.dynamicSize),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.DYNAMIC_DRAW),this.dirtyColors=!0,this.indices=new Uint16Array(6*this.dynamicSize);for(var e=0,i=this.indices.length/6;i>e;e++){var r=6*e,s=4*e;this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},n.refresh=function(){this.dynamicSize<this.size&&this.growBatch();for(var t,e,i=0,r=this.head;r;){t=8*i;var s=r.texture,n=s.frame,a=s.baseTexture.width,o=s.baseTexture.height;this.uvs[t+0]=n.x/a,this.uvs[t+1]=n.y/o,this.uvs[t+2]=(n.x+n.width)/a,this.uvs[t+3]=n.y/o,this.uvs[t+4]=(n.x+n.width)/a,this.uvs[t+5]=(n.y+n.height)/o,this.uvs[t+6]=n.x/a,this.uvs[t+7]=(n.y+n.height)/o,r.updateFrame=!1,e=4*i,this.colors[e]=this.colors[e+1]=this.colors[e+2]=this.colors[e+3]=r.worldAlpha,r=r.__next,i++}this.dirtyUVS=!0,this.dirtyColors=!0},n.update=function(){for(var t,e,i,s,n,a,o,h,l,u,c,f,d,p,v,g,x=0,m=this.head,_=this.verticies,b=this.uvs,A=this.colors;m;){if(m.vcount===r.visibleCount){if(e=m.texture.frame.width,i=m.texture.frame.height,s=m.anchor.x,n=m.anchor.y,a=e*(1-s),o=e*-s,h=i*(1-n),l=i*-n,u=8*x,t=m.worldTransform,c=t[0],f=t[3],d=t[1],p=t[4],v=t[2],g=t[5],_[u+0]=c*o+d*l+v,_[u+1]=p*l+f*o+g,_[u+2]=c*a+d*l+v,_[u+3]=p*l+f*a+g,_[u+4]=c*a+d*h+v,_[u+5]=p*h+f*a+g,_[u+6]=c*o+d*h+v,_[u+7]=p*h+f*o+g,m.updateFrame||m.texture.updateFrame){this.dirtyUVS=!0;var T=m.texture,E=T.frame,R=T.baseTexture.width,y=T.baseTexture.height;b[u+0]=E.x/R,b[u+1]=E.y/y,b[u+2]=(E.x+E.width)/R,b[u+3]=E.y/y,b[u+4]=(E.x+E.width)/R,b[u+5]=(E.y+E.height)/y,b[u+6]=E.x/R,b[u+7]=(E.y+E.height)/y,m.updateFrame=!1}if(m.cacheAlpha!==m.worldAlpha){m.cacheAlpha=m.worldAlpha;var w=4*x;A[w]=A[w+1]=A[w+2]=A[w+3]=m.worldAlpha,this.dirtyColors=!0}}else u=8*x,_[u+0]=_[u+1]=_[u+2]=_[u+3]=_[u+4]=_[u+5]=_[u+6]=_[u+7]=0;x++,m=m.__next}},n.render=function(t,e){if(t=t||0,arguments.length<2&&(e=this.size),this.dirty&&(this.refresh(),this.dirty=!1),this.size){this.update();var i=this.gl,s=r.defaultShader;i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.verticies),i.vertexAttribPointer(s.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this.uvBuffer),this.dirtyUVS&&(this.dirtyUVS=!1,i.bufferSubData(i.ARRAY_BUFFER,0,this.uvs)),i.vertexAttribPointer(s.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.texture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),this.dirtyColors&&(this.dirtyColors=!1,i.bufferSubData(i.ARRAY_BUFFER,0,this.colors)),i.vertexAttribPointer(s.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var n=e-t;i.drawElements(i.TRIANGLES,6*n,i.UNSIGNED_SHORT,2*t*6)}};var a=[];i.restoreBatches=function(t){for(var e=0,i=a.length;i>e;e++)a[e].restoreLostContext(t)},i.getBatch=function(){return a.length?a.pop():new i(r.gl)},i.returnBatch=function(t){t.clean(),a.push(t)},e.exports=i},{"../../core/globals":3,"../../display/blendModes":8}],25:[function(t,e){"use strict";function i(t,e){var i=s.gl;this.frameBuffer=i.createFramebuffer(),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0),this.resize(t,e)}function r(t){this.transparent=t,this.filterStack=[],this.texturePool=[],this.offsetX=0,this.offsetY=0,this.initShaderBuffers()}var s=t("../../core/globals"),n=t("../../display/Sprite"),a=t("../../primitives/Graphics"),o=t("./PixiShader");i.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=s.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)}};var h=r.prototype;h.begin=function(t,e){this.width=2*t.x,this.height=2*-t.y,this.buffer=e},h.pushFilter=function(t){var e=s.gl;this.filterStack.push(t);var r=t.filterPasses[0];this.offsetX+=t.target.filterArea.x,this.offsetY+=t.target.filterArea.y;var n=this.texturePool.pop();n?n.resize(this.width,this.height):n=new i(this.width,this.height),e.bindTexture(e.TEXTURE_2D,n.texture),this.getBounds(t.target);var a=t.target.filterArea,o=r.padding;a.x-=o,a.y-=o,a.width+=2*o,a.height+=2*o,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,n.frameBuffer),e.viewport(0,0,a.width,a.height),s.projection.x=a.width/2,s.projection.y=-a.height/2,s.offset.x=-a.x,s.offset.y=-a.y,e.uniform2f(s.defaultShader.projectionVector,a.width/2,-a.height/2),e.uniform2f(s.defaultShader.offsetVector,-a.x,-a.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=n},h.popFilter=function(){var t=s.gl,e=this.filterStack.pop(),r=e.target.filterArea,n=e._glFilterTexture;if(e.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=n,o=this.texturePool.pop();o||(o=new i(this.width,this.height)),t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var h=0;h<e.filterPasses.length-1;h++){var l=e.filterPasses[h];t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(l,r,r.width,r.height);var u=a;a=o,o=u}t.enable(t.BLEND),n=a,this.texturePool.push(o)}var c=e.filterPasses[e.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var f=this.width,d=this.height,p=0,v=0,g=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,this.transparent);else{var x=this.filterStack[this.filterStack.length-1];r=x.target.filterArea,f=r.width,d=r.height,p=r.x,v=r.y,g=x._glFilterTexture.frameBuffer}s.projection.x=f/2,s.projection.y=-d/2,s.offset.x=p,s.offset.y=v,r=e.target.filterArea;var m=r.x-p,_=r.y-v;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=m,this.vertexArray[1]=_+r.height,this.vertexArray[2]=m+r.width,this.vertexArray[3]=_+r.height,this.vertexArray[4]=m,this.vertexArray[5]=_,this.vertexArray[6]=m+r.width,this.vertexArray[7]=_,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,f,d),t.bindFramebuffer(t.FRAMEBUFFER,g),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.texture),this.applyFilterPass(c,r,f,d),t.useProgram(s.defaultShader.program),t.uniform2f(s.defaultShader.projectionVector,f/2,-d/2),t.uniform2f(s.defaultShader.offsetVector,-p,-v),this.texturePool.push(n),e._glFilterTexture=null},h.applyFilterPass=function(t,e,i,r){var n=s.gl,a=t.shader;a||(a=new o,a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shader=a),n.useProgram(a.program),n.uniform2f(a.projectionVector,i/2,-r/2),n.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(a.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},h.initShaderBuffers=function(){var t=s.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},h.getBounds=function(t){var e,i,r,s,o,h,l,u,c,f,d,p,v,g,x,m,_,b,A,T,E,R,y,w,F=t.first,C=t.last._iNext,S=-1/0,B=-1/0,P=1/0,D=1/0;do{if(F.visible)if(F instanceof n)i=F.texture.frame.width,r=F.texture.frame.height,s=F.anchor.x,o=F.anchor.y,h=i*(1-s),l=i*-s,u=r*(1-o),c=r*-o,f=!0;else if(F instanceof a){F.updateFilterBounds();var L=F.bounds;i=L.width,r=L.height,h=L.x,l=L.x+L.width,u=L.y,c=L.y+L.height,f=!0}f&&(e=F.worldTransform,d=e[0],p=e[3],v=e[1],g=e[4],x=e[2],m=e[5],_=d*l+v*c+x,E=g*c+p*l+m,b=d*h+v*c+x,R=g*c+p*h+m,A=d*h+v*u+x,y=g*u+p*h+m,T=d*l+v*u+x,w=g*u+p*l+m,P=P>_?_:P,P=P>b?b:P,P=P>A?A:P,P=P>T?T:P,D=D>E?E:D,D=D>R?R:D,D=D>y?y:D,D=D>w?w:D,S=_>S?_:S,S=b>S?b:S,S=A>S?A:S,S=T>S?T:S,B=E>B?E:B,B=R>B?R:B,B=y>B?y:B,B=w>B?w:B),f=!1,F=F._iNext}while(F!==C);t.filterArea.x=P,t.filterArea.y=D,t.filterArea.width=S-P,t.filterArea.height=B-D},e.exports=r},{"../../core/globals":3,"../../display/Sprite":6,"../../primitives/Graphics":18,"./PixiShader":21}],26:[function(t,e){"use strict";function i(t,e){this.gl=t,this.root=null,this.backgroundColor=void 0,this.transparent=void 0===e?!0:e,this.batchs=[],this.toRemove=[],this.filterManager=new o(this.transparent)}var r=t("../../core/globals"),s=t("./shaders"),n=t("./graphics"),a=t("./WebGLBatch"),o=t("./WebGLFilterManager"),h=t("../../geom/matrix").mat3,l=t("../../textures/BaseTexture"),u=t("../../extras/TilingSprite"),c=t("../../extras/Strip"),f=t("../../primitives/Graphics"),d=t("../../filters/FilterBlock"),p=t("../../display/Sprite"),v=t("../../extras/CustomRenderable"),g=i.prototype;g.setRenderable=function(t){this.root&&this.removeDisplayObjectAndChildren(this.root),t.worldVisible=t.visible,this.root=t,this.addDisplayObjectAndChildren(t)},g.render=function(t,e){var s=this.gl;i.updateTextures(s),s.uniform2f(r.defaultShader.projectionVector,t.x,t.y),this.filterManager.begin(t,e),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA);for(var n,o=0;o<this.batchs.length;o++)n=this.batchs[o],n instanceof a?this.batchs[o].render():this.renderSpecial(n,t)},g.handleFilter=function(){},g.renderSpecific=function(t,e,s){var n=this.gl;i.updateTextures(n),n.uniform2f(r.defaultShader.projectionVector,e.x,e.y),this.filterManager.begin(e,s);for(var o,h,l,u,c,f,d=t.first;d._iNext&&(!d.renderable||!d.__renderGroup);)d=d._iNext;var v=d.batch;if(d instanceof p)if(v=d.batch,f=v.head,f===d)o=0;else for(o=1;f.__next!==d;)o++,f=f.__next;else v=d;for(var g=t.last;g._iPrev&&(!g.renderable||!g.__renderGroup);)g=g._iNext;if(g instanceof p)if(c=g.batch,f=c.head,f===g)l=0;else for(l=1;f.__next!==g;)l++,f=f.__next;else c=g;if(v===c)return void(v instanceof a?v.render(o,l+1):this.renderSpecial(v,e));h=this.batchs.indexOf(v),u=this.batchs.indexOf(c),v instanceof a?v.render(o):this.renderSpecial(v,e);for(var x,m=h+1;u>m;m++)x=this.batchs[m],x instanceof a?this.batchs[m].render():this.renderSpecial(x,e);c instanceof a?c.render(0,l+1):this.renderSpecial(c,e)},g.renderSpecial=function(t,e){var i=t.vcount===r.visibleCount;t instanceof u?i&&this.renderTilingSprite(t,e):t instanceof c?i&&this.renderStrip(t,e):t instanceof v?i&&t.renderWebGL(this,e):t instanceof f?i&&t.renderable&&n.renderGraphics(t,e):t instanceof d&&this.handleFilterBlock(t,e)};var x=[];g.handleFilterBlock=function(t,e){var i=r.gl;if(t.open)t.data instanceof Array?this.filterManager.pushFilter(t):(x.push(t),i.enable(i.STENCIL_TEST),i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,1,1),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderGraphics(t.data,e),i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.NOTEQUAL,0,x.length),i.stencilOp(i.KEEP,i.KEEP,i.KEEP));else if(t.data instanceof Array)this.filterManager.popFilter();else{var s=x.pop(t);s&&(i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,1,1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),n.renderGraphics(s.data,e),i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.NOTEQUAL,0,x.length),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)),i.disable(i.STENCIL_TEST)}},g.updateTexture=function(t){this.removeObject(t);for(var e=t.first;e!==this.root&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););this.insertObject(t,e,i)},g.addFilterBlocks=function(t,e){t.__renderGroup=this,e.__renderGroup=this;for(var i=t;i!==this.root.first&&(i=i._iPrev,!i.renderable||!i.__renderGroup););this.insertAfter(t,i);for(var r=e;r!==this.root.first&&(r=r._iPrev,!r.renderable||!r.__renderGroup););this.insertAfter(e,r)},g.removeFilterBlocks=function(t,e){this.removeObject(t),this.removeObject(e)},g.addDisplayObjectAndChildren=function(t){t.__renderGroup&&t.__renderGroup.removeDisplayObjectAndChildren(t);for(var e=t.first;e!==this.root.first&&(e=e._iPrev,!e.renderable||!e.__renderGroup););for(var i=t.last;i._iNext&&(i=i._iNext,!i.renderable||!i.__renderGroup););var r=t.first,s=t.last._iNext;do r.__renderGroup=this,r.renderable&&(this.insertObject(r,e,i),e=r),r=r._iNext;while(r!==s)},g.removeDisplayObjectAndChildren=function(t){if(t.__renderGroup===this)do t.__renderGroup=null,t.renderable&&this.removeObject(t),t=t._iNext;while(t)},g.insertObject=function(t,e,i){var r,s,n=e,o=i;if(t instanceof p){var h,l;if(n instanceof p){if(h=n.batch,h&&h.texture===t.texture.baseTexture&&h.blendMode===t.blendMode)return void h.insertAfter(t,n)}else h=n;if(o)if(o instanceof p){if(l=o.batch){if(l.texture===t.texture.baseTexture&&l.blendMode===t.blendMode)return void l.insertBefore(t,o);if(l===h){var f=h.split(o);return r=a.getBatch(),s=this.batchs.indexOf(h),r.init(t),void this.batchs.splice(s+1,0,r,f)}}}else l=o;return r=a.getBatch(),r.init(t),void(h?(s=this.batchs.indexOf(h),this.batchs.splice(s+1,0,r)):this.batchs.push(r))}t instanceof u?this.initTilingSprite(t):t instanceof c&&this.initStrip(t),this.insertAfter(t,n)},g.insertAfter=function(t,e){var i,r,s;e instanceof p?(i=e.batch,i?i.tail===e?(s=this.batchs.indexOf(i),this.batchs.splice(s+1,0,t)):(r=i.split(e.__next),s=this.batchs.indexOf(i),this.batchs.splice(s+1,0,t,r)):this.batchs.push(t)):(s=this.batchs.indexOf(e),this.batchs.splice(s+1,0,t))},g.removeObject=function(t){var e,i;if(t instanceof p){var r=t.batch;if(!r)return;r.remove(t),r.size||(e=r)}else e=t;if(e){if(i=this.batchs.indexOf(e),-1===i)return;if(0===i||i===this.batchs.length-1)return this.batchs.splice(i,1),void(e instanceof a&&a.returnBatch(e));if(this.batchs[i-1]instanceof a&&this.batchs[i+1]instanceof a&&this.batchs[i-1].texture===this.batchs[i+1].texture&&this.batchs[i-1].blendMode===this.batchs[i+1].blendMode)return this.batchs[i-1].merge(this.batchs[i+1]),e instanceof a&&a.returnBatch(e),a.returnBatch(this.batchs[i+1]),void this.batchs.splice(i,2);this.batchs.splice(i,1),e instanceof a&&a.returnBatch(e)}},g.initTilingSprite=function(t){var e=this.gl;t.verticies=new Float32Array([0,0,t.width,0,t.width,t.height,0,t.height]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.colors=new Float32Array([1,1,1,1]),t.indices=new Uint16Array([0,1,3,2]),t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW),t.texture.baseTexture._glTexture?(e.bindTexture(e.TEXTURE_2D,t.texture.baseTexture._glTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),t.texture.baseTexture._powerOf2=!0):t.texture.baseTexture._powerOf2=!0},g.renderStrip=function(t,e){var i=this.gl;s.activateStripShader();var n=r.stripShader,a=h.clone(t.worldTransform);h.transpose(a),i.uniformMatrix3fv(n.translationMatrix,!1,a),i.uniform2f(n.projectionVector,e.x,e.y),i.uniform2f(n.offsetVector,-r.offset.x,-r.offset.y),i.uniform1f(n.alpha,t.worldAlpha),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.verticies,i.STATIC_DRAW),i.vertexAttribPointer(n.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.baseTexture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,t._colorBuffer),i.bufferData(i.ARRAY_BUFFER,t.colors,i.STATIC_DRAW),i.vertexAttribPointer(n.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.verticies),i.vertexAttribPointer(n.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture.baseTexture._glTexture),i.bindBuffer(i.ARRAY_BUFFER,t._colorBuffer),i.vertexAttribPointer(n.colorAttribute,1,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),s.deactivateStripShader()},g.renderTilingSprite=function(t,e){var i=this.gl,r=t.tilePosition,s=t.tileScale,n=r.x/t.texture.baseTexture.width,a=r.y/t.texture.baseTexture.height,o=t.width/t.texture.baseTexture.width/s.x,h=t.height/t.texture.baseTexture.height/s.y;t.uvs[0]=0-n,t.uvs[1]=0-a,t.uvs[2]=1*o-n,t.uvs[3]=0-a,t.uvs[4]=1*o-n,t.uvs[5]=1*h-a,t.uvs[6]=0-n,t.uvs[7]=1*h-a,i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.uvs),this.renderStrip(t,e)},g.initStrip=function(t){var e=this.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},i.updateTexture=function(t,e){e._glTexture||(e._glTexture=t.createTexture()),e.hasLoaded&&(t.bindTexture(t.TEXTURE_2D,e._glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===l.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===l.SCALE_MODE.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindTexture(t.TEXTURE_2D,null))},i.destroyTexture=function(t,e){e._glTexture&&(e._glTexture=t.createTexture(),t.deleteTexture(t.TEXTURE_2D,e._glTexture))},i.updateTextures=function(t){for(var e=0,s=r.texturesToUpdate.length;s>e;e++)i.updateTexture(t,r.texturesToUpdate[e]);for(e=0,s=r.texturesToDestroy.length;s>e;e++)i.destroyTexture(t,r.texturesToDestroy[e]);r.texturesToUpdate=[],r.texturesToDestroy=[]},e.exports=i},{"../../core/globals":3,"../../display/Sprite":6,"../../extras/CustomRenderable":10,"../../extras/Strip":11,"../../extras/TilingSprite":12,"../../filters/FilterBlock":13,"../../geom/matrix":16,"../../primitives/Graphics":18,"../../textures/BaseTexture":31,"./WebGLBatch":24,"./WebGLFilterManager":25,"./graphics":29,"./shaders":30}],27:[function(t,e){"use strict";function i(t,e,i,l,u){var c;this.transparent=!!l,this.width=t||800,this.height=e||600,this.view=i||r.createCanvas(),this.view.width=this.width,this.view.height=this.height;var f=this;this.view.addEventListener("webglcontextlost",function(t){f.handleContextLost(t)},!1),this.view.addEventListener("webglcontextrestored",function(t){f.handleContextRestored(t)},!1),this.batchs=[];var d={alpha:this.transparent,antialias:!!u,premultipliedAlpha:!1,stencil:!0};try{c=this.view.getContext("experimental-webgl",d)}catch(p){try{c=this.view.getContext("webgl",d)}catch(v){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}this.gl=s.gl=c,n.initDefaultShaders(),c.useProgram(s.defaultShader.program),this.batch=new a(c),c.disable(c.DEPTH_TEST),c.disable(c.CULL_FACE),c.enable(c.BLEND),c.colorMask(!0,!0,!0,this.transparent),this.projection=s.projection=new h(400,300),this.offset=s.offset=new h(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.stageRenderGroup=new o(this.gl,this.transparent)}var r=t("../../platform"),s=t("../../core/globals"),n=t("./shaders"),a=t("./WebGLBatch"),o=t("./WebGLRenderGroup"),h=t("../../geom/Point"),l=t("../../textures/Texture"),u=i.prototype;u.render=function(t){if(!this.contextLost){this.__stage!==t&&(this.__stage=t,this.stageRenderGroup.setRenderable(t));var e=this.gl;if(o.updateTextures(e),s.visibleCount++,t.updateTransform(),e.colorMask(!0,!0,!0,this.transparent),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],!this.transparent),e.clear(e.COLOR_BUFFER_BIT),this.stageRenderGroup.backgroundColor=t.backgroundColorSplit,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.stageRenderGroup.render(this.projection),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),l.frameUpdates.length>0){for(var i=0,r=l.frameUpdates.length;r>i;i++)l.frameUpdates[i].updateFrame=!1;
l.frameUpdates=[]}}},u.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},u.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},u.handleContextRestored=function(){var t=this.gl=this.view.getContext("experimental-webgl",{alpha:!0});this.initShaders();for(var e in l.cache){var i=l.cache[e].baseTexture;i._glTexture=null,o.updateTexture(t,i)}for(var r=0,s=this.batchs.length;s>r;r++)this.batchs[r].restoreLostContext(t),this.batchs[r].dirty=!0;a.restoreBatches(t),this.contextLost=!1},e.exports=i},{"../../core/globals":3,"../../geom/Point":14,"../../platform":17,"../../textures/Texture":32,"./WebGLBatch":24,"./WebGLRenderGroup":26,"./shaders":30}],28:[function(t,e,i){"use strict";var r=t("../../platform");i.shader=function(t,e,i){var s=e.join("\n"),n=t.createShader(i);return t.shaderSource(n,s),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(r.console&&r.console.error(t.getShaderInfoLog(n)),null)},i.program=function(t,e,s){var n=i.shader(t,s,t.FRAGMENT_SHADER),a=i.shader(t,e,t.VERTEX_SHADER),o=t.createProgram();return t.attachShader(o,a),t.attachShader(o,n),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)?o:(r.console&&r.console.error("Could not initialise shaders"),null)}},{"../../platform":17}],29:[function(t,e,i){"use strict";var r=t("./shaders"),s=t("../../core/globals"),n=t("../../geom/matrix").mat3,a=t("../../utils/color").hex2rgb,o=t("../../utils/Polyk").triangulate,h=t("../../geom/Point"),l=t("../../primitives/Graphics");i.renderGraphics=function(t,e){var a=s.gl;t._webGL||(t._webGL={points:[],indices:[],lastIndex:0,buffer:a.createBuffer(),indexBuffer:a.createBuffer()}),t.dirty&&(t.dirty=!1,t.clearDirty&&(t.clearDirty=!1,t._webGL.lastIndex=0,t._webGL.points=[],t._webGL.indices=[]),i.updateGraphics(t)),r.activatePrimitiveShader();var o=n.clone(t.worldTransform);n.transpose(o),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.uniformMatrix3fv(s.primitiveShader.translationMatrix,!1,o),a.uniform2f(s.primitiveShader.projectionVector,e.x,-e.y),a.uniform2f(s.primitiveShader.offsetVector,-s.offset.x,-s.offset.y),a.uniform1f(s.primitiveShader.alpha,t.worldAlpha),a.bindBuffer(a.ARRAY_BUFFER,t._webGL.buffer),a.vertexAttribPointer(s.primitiveShader.aVertexPosition,2,a.FLOAT,!1,24,0),a.vertexAttribPointer(s.primitiveShader.colorAttribute,4,a.FLOAT,!1,24,8),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),a.drawElements(a.TRIANGLE_STRIP,t._webGL.indices.length,a.UNSIGNED_SHORT,0),r.deactivatePrimitiveShader()},i.updateGraphics=function(t){for(var e=t._webGL.lastIndex;e<t.graphicsData.length;e++){var r=t.graphicsData[e];r.type===l.POLY?(r.fill&&r.points.length>3&&i.buildPoly(r,t._webGL),r.lineWidth>0&&i.buildLine(r,t._webGL)):r.type===l.RECT?i.buildRectangle(r,t._webGL):r.type===l.CIRC||r.type===l.ELIP,i.buildCircle(r,t._webGL)}t._webGL.lastIndex=t.graphicsData.length;var n=s.gl;t._webGL.glPoints=new Float32Array(t._webGL.points),n.bindBuffer(n.ARRAY_BUFFER,t._webGL.buffer),n.bufferData(n.ARRAY_BUFFER,t._webGL.glPoints,n.STATIC_DRAW),t._webGL.glIndicies=new Uint16Array(t._webGL.indices),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._webGL.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t._webGL.glIndicies,n.STATIC_DRAW)},i.buildRectangle=function(t,e){var r=t.points,s=r[0],n=r[1],o=r[2],h=r[3];if(t.fill){var l=a(t.fillColor),u=t.fillAlpha,c=l[0]*u,f=l[1]*u,d=l[2]*u,p=e.points,v=e.indices,g=p.length/6;p.push(s,n),p.push(c,f,d,u),p.push(s+o,n),p.push(c,f,d,u),p.push(s,n+h),p.push(c,f,d,u),p.push(s+o,n+h),p.push(c,f,d,u),v.push(g,g,g+1,g+2,g+3,g+3)}t.lineWidth&&(t.points=[s,n,s+o,n,s+o,n+h,s,n+h,s,n],i.buildLine(t,e))},i.buildCircle=function(t,e){var r=t.points,s=r[0],n=r[1],o=r[2],h=r[3],l=40,u=2*Math.PI/l,c=0;if(t.fill){var f=a(t.fillColor),d=t.fillAlpha,p=f[0]*d,v=f[1]*d,g=f[2]*d,x=e.points,m=e.indices,_=x.length/6;for(m.push(_),c=0;l+1>c;c++)x.push(s,n,p,v,g,d),x.push(s+Math.sin(u*c)*o,n+Math.cos(u*c)*h,p,v,g,d),m.push(_++,_++);m.push(_-1)}if(t.lineWidth){for(t.points=[],c=0;l+1>c;c++)t.points.push(s+Math.sin(u*c)*o,n+Math.cos(u*c)*h);i.buildLine(t,e)}},i.buildLine=function(t,e){var i=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(i=0;i<r.length;i++)r[i]+=.5;var s=new h(r[0],r[1]),n=new h(r[r.length-2],r[r.length-1]);if(s.x===n.x&&s.y===n.y){r.pop(),r.pop(),n=new h(r[r.length-2],r[r.length-1]);var o=n.x+.5*(s.x-n.x),l=n.y+.5*(s.y-n.y);r.unshift(o,l),r.push(o,l)}var u,c,f,d,p,v,g,x,m,_,b,A,T,E,R,y,w,F,C,S,B,P,D,L=e.points,U=e.indices,M=r.length/2,O=r.length,I=L.length/6,N=t.lineWidth/2,G=a(t.lineColor),Y=t.lineAlpha,V=G[0]*Y,j=G[1]*Y,k=G[2]*Y;for(f=r[0],d=r[1],p=r[2],v=r[3],m=-(d-v),_=f-p,D=Math.sqrt(m*m+_*_),m/=D,_/=D,m*=N,_*=N,L.push(f-m,d-_,V,j,k,Y),L.push(f+m,d+_,V,j,k,Y),i=1;M-1>i;i++)f=r[2*(i-1)],d=r[2*(i-1)+1],p=r[2*i],v=r[2*i+1],g=r[2*(i+1)],x=r[2*(i+1)+1],m=-(d-v),_=f-p,D=Math.sqrt(m*m+_*_),m/=D,_/=D,m*=N,_*=N,b=-(v-x),A=p-g,D=Math.sqrt(b*b+A*A),b/=D,A/=D,b*=N,A*=N,R=-_+d-(-_+v),y=-m+p-(-m+f),w=(-m+f)*(-_+v)-(-m+p)*(-_+d),F=-A+x-(-A+v),C=-b+p-(-b+g),S=(-b+g)*(-A+v)-(-b+p)*(-A+x),B=R*C-F*y,Math.abs(B)<.1?(B+=10.1,L.push(p-m,v-_,V,j,k,Y),L.push(p+m,v+_,V,j,k,Y)):(u=(y*S-C*w)/B,c=(F*w-R*S)/B,P=(u-p)*(u-p)+(c-v)+(c-v),P>19600?(T=m-b,E=_-A,D=Math.sqrt(T*T+E*E),T/=D,E/=D,T*=N,E*=N,L.push(p-T,v-E),L.push(V,j,k,Y),L.push(p+T,v+E),L.push(V,j,k,Y),L.push(p-T,v-E),L.push(V,j,k,Y),O++):(L.push(u,c),L.push(V,j,k,Y),L.push(p-(u-p),v-(c-v)),L.push(V,j,k,Y)));for(f=r[2*(M-2)],d=r[2*(M-2)+1],p=r[2*(M-1)],v=r[2*(M-1)+1],m=-(d-v),_=f-p,D=Math.sqrt(m*m+_*_),m/=D,_/=D,m*=N,_*=N,L.push(p-m,v-_),L.push(V,j,k,Y),L.push(p+m,v+_),L.push(V,j,k,Y),U.push(I),i=0;O>i;i++)U.push(I++);U.push(I-1)}},i.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var r=e.points,s=e.indices,n=i.length/2,h=a(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,f=h[2]*l,d=o(i),p=r.length/6,v=0;for(v=0;v<d.length;v+=3)s.push(d[v]+p),s.push(d[v]+p),s.push(d[v+1]+p),s.push(d[v+2]+p),s.push(d[v+2]+p);for(v=0;n>v;v++)r.push(i[2*v],i[2*v+1],u,c,f,l)}}},{"../../core/globals":3,"../../geom/Point":14,"../../geom/matrix":16,"../../primitives/Graphics":18,"../../utils/Polyk":33,"../../utils/color":35,"./shaders":30}],30:[function(t,e,i){"use strict";var r=t("../../core/globals"),s=t("./PrimitiveShader"),n=t("./StripShader"),a=t("./PixiShader");i.initDefaultShaders=function(){r.primitiveShader=new s,r.primitiveShader.init(),r.stripShader=new n,r.stripShader.init(),r.defaultShader=new a,r.defaultShader.init();var t=r.gl,e=r.defaultShader.program;t.useProgram(e),t.enableVertexAttribArray(r.defaultShader.aVertexPosition),t.enableVertexAttribArray(r.defaultShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aTextureCoord)},i.activatePrimitiveShader=function(){var t=r.gl;t.useProgram(r.primitiveShader.program),t.disableVertexAttribArray(r.defaultShader.aVertexPosition),t.disableVertexAttribArray(r.defaultShader.colorAttribute),t.disableVertexAttribArray(r.defaultShader.aTextureCoord),t.enableVertexAttribArray(r.primitiveShader.aVertexPosition),t.enableVertexAttribArray(r.primitiveShader.colorAttribute)},i.deactivatePrimitiveShader=function(){var t=r.gl;t.useProgram(r.defaultShader.program),t.disableVertexAttribArray(r.primitiveShader.aVertexPosition),t.disableVertexAttribArray(r.primitiveShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aVertexPosition),t.enableVertexAttribArray(r.defaultShader.colorAttribute),t.enableVertexAttribArray(r.defaultShader.aTextureCoord)},i.activateStripShader=function(){var t=r.gl;t.useProgram(r.stripShader.program)},i.deactivateStripShader=function(){var t=r.gl;t.useProgram(r.defaultShader.program)}},{"../../core/globals":3,"./PixiShader":21,"./PrimitiveShader":22,"./StripShader":23}],31:[function(t,e){"use strict";function i(t,e){if(n.call(this),this.width=100,this.height=100,this.scaleMode=e||i.SCALE_MODE.DEFAULT,this.hasLoaded=!1,this.source=t,t){if("complete"in this.source)if(this.source.complete)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,s.texturesToUpdate.push(this);else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.width,r.height=r.source.height,s.texturesToUpdate.push(r),r.dispatchEvent({type:"loaded",content:r})}}else this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,s.texturesToUpdate.push(this);this.imageUrl=null,this._powerOf2=!1}}var r=t("../platform"),s=t("../core/globals"),n=t("../events/EventTarget"),a={},o=i.prototype;o.destroy=function(){this.source.src&&(this.imageUrl in a&&delete a[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,s.texturesToDestroy.push(this)},o.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},i.fromImage=function(t,e,s){var n=a[t];if(!n){var o=new r.createImage;e&&(o.crossOrigin=""),o.src=t,n=new i(o,s),n.imageUrl=t,a[t]=n}return n},i.SCALE_MODE={DEFAULT:0,LINEAR:0,NEAREST:1},e.exports=i},{"../core/globals":3,"../events/EventTarget":9,"../platform":17}],32:[function(t,e){"use strict";function i(t,e){if(a.call(this),e||(this.noFrame=!0,e=new n(0,0,1,1)),t instanceof i&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=new s,this.scope=this,t.hasLoaded)this.noFrame&&(e=new n(0,0,t.width,t.height)),this.setFrame(e);else{var r=this;t.addEventListener("loaded",function(){r.onBaseTextureLoaded()})}}var r=t("./BaseTexture"),s=t("../geom/Point"),n=t("../geom/Rectangle"),a=t("../events/EventTarget"),o=i.prototype;o.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n(0,0,t.width,t.height)),this.noFrame=!1,this.width=this.frame.width,this.height=this.frame.height,this.scope.dispatchEvent({type:"update",content:this})},o.destroy=function(t){t&&this.baseTexture.destroy()},o.setFrame=function(t){if(this.frame=t,this.width=t.width,this.height=t.height,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,i.frameUpdates.push(this)},i.fromImage=function(t,e,s){var n=i.cache[t];return n||(n=new i(r.fromImage(t,e,s)),i.cache[t]=n),n},i.fromFrame=function(t){var e=i.cache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return e},i.fromCanvas=function(t,e){var s=new r(t,e);return new i(s)},i.addTextureToCache=function(t,e){i.cache[e]=t},i.removeTextureFromCache=function(t){var e=i.cache[t];return i.cache[t]=null,e},i.cache={},i.frameUpdates=[],i.SCALE_MODE=r.SCALE_MODE,e.exports=i},{"../events/EventTarget":9,"../geom/Point":14,"../geom/Rectangle":15,"./BaseTexture":31}],33:[function(t,e,i){"use strict";function r(t,e,i,r,s,n,a,o){var h=a-i,l=o-r,u=s-i,c=n-r,f=t-i,d=e-r,p=h*h+l*l,v=h*u+l*c,g=h*f+l*d,x=u*u+c*c,m=u*f+c*d,_=1/(p*x-v*v),b=(x*g-v*m)*_,A=(p*m-v*g)*_;return b>=0&&A>=0&&1>b+A}function s(t,e,i,r,s,n,a){return(e-r)*(s-i)+(i-t)*(n-r)>=0===a}var n=t("../platform");i.triangulate=function(t){var e=!0,i=t.length>>1;if(3>i)return[];for(var a=[],o=[],h=0;i>h;h++)o.push(h);h=0;for(var l=i;l>3;){var u=o[(h+0)%l],c=o[(h+1)%l],f=o[(h+2)%l],d=t[2*u],p=t[2*u+1],v=t[2*c],g=t[2*c+1],x=t[2*f],m=t[2*f+1],_=!1;if(s(d,p,v,g,x,m,e)){_=!0;for(var b=0;l>b;b++){var A=o[b];if(A!==u&&A!==c&&A!==f&&r(t[2*A],t[2*A+1],d,p,v,g,x,m)){_=!1;break}}}if(_)a.push(u,c,f),o.splice((h+1)%l,1),l--,h=0;else if(h++>3*l){if(!e)return n.console.warn("PIXI Warning: shape too complex to fill"),[];for(a=[],o=[],h=0;i>h;h++)o.push(h);h=0,l=i,e=!1}}return a.push(o[0],o[1],o[2]),a}},{"../platform":17}],34:[function(t,e){"use strict";var i=t("../platform"),r=t("../renderers/canvas/CanvasRenderer"),s=t("../renderers/webgl/WebGLRenderer");e.exports=function(t,e,n,a,o){t||(t=800),e||(e=600);var h=function(){try{var t=i.createCanvas();return!!i.window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();if(h&&i.navigator){var l=-1!==i.navigator.userAgent.toLowerCase().indexOf("trident");h=!l}return h?new s(t,e,n,a,o):new r(t,e,n,a)}},{"../platform":17,"../renderers/canvas/CanvasRenderer":19,"../renderers/webgl/WebGLRenderer":27}],35:[function(t,e,i){"use strict";i.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]}},{}],36:[function(t,e){(function(t){e.exports=function(){"use strict";for(var e=0,i=["ms","moz","webkit","o"],r=0;r<i.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[i[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[r]+"CancelAnimationFrame"]||t[i[r]+"CancelRequestAnimationFrame"];return t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-(r-e)),n=t.setTimeout(function(){i(r+s)},s);return e=r+s,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){t.clearTimeout(e)}),t.requestAnimationFrame}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);